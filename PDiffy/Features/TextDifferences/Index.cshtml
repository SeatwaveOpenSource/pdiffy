@model IList<PDiffy.Features.TextDifferences.Index.Model>

@{
	Layout = "~/Features/Shared/_Layout.cshtml";
}
@section Styles {<link href="~/Styles/Differences.css" rel="stylesheet" />}
@section Scripts {
	<script src="~/Scripts/Differences.generated.js" type="text/javascript"></script> }

<div class="page-container align-center text-align-center">
	<h2 class="page-title align-center">Differences</h2>
	@foreach (var page in Model.Reverse())
	{
		<div class="page-object align-center text-align-center">
			<h3>@page.Name</h3>

			@if (page.HumanComparisonRequired)
			{ <p class="comparison">@page.LastComparisonDate</p> }
			else if (page.ComparisonStillValid)
			{ <p class="comparison valid">@page.LastComparisonDate</p> }
			else
			{ <p class="comparison invalid">@page.LastComparisonDate</p>}

			<div class="texts">
				@if (page.HumanComparisonRequired)
				{
					<div class="original-text">
						<p class="pre-wrap-white-space">@page.OriginalText</p>

					</div>
					if (page.ComparisonExists)
					{
						<div class="comparison-text">
							<p class="pre-wrap-white-space">@page.ComparisonText</p>
						</div>
					}
					<div class="differences-text">
						<p>@Html.Raw(Server.HtmlDecode(page.DifferenceText.Replace("&amp;para;", string.Empty)))</p>
					</div>
				}
			</div>

			<div class="controls">
				@if (page.HumanComparisonRequired)
				{
					@Html.ActionLink("Approve Difference", "Approve", "ImageDifferences", new { name = page.Name }, new { @class = "btn" })
				}

				<a class="btn align-center" href="@Url.Action("Index", "History", new { name = page.Name })">History</a>

				<a class="btn align-center" href="#@page.Name">Delete</a>
			</div>
			<div id="@page.Name" class="modalDialog">
				<div class="align-center text-align-center">
					<a href="#closedModal" title="Close" class="close">X</a>

					<h3>Delete @page.Name</h3>
					<p>Warning! Read this!</p>
					<p>This will delete this page and the history for this page.</p>
					@Html.ActionLink("#$@&! the police", "Delete", new { name = page.Name }, new { @class = "btn danger" })
				</div>
			</div>
		</div>
	}
	<br />
	<br />
	<a class="btn danger align-center" href="#deleteAll">Delete All</a>
	<div id="deleteAll" class="modalDialog">
		<div class="align-center text-align-center">
			<a href="#closedModal" title="Close" class="close">X</a>

			<h3>Delete All</h3>
			<p>Warning! Read this!</p>
			<p>This will delete all pages and all history.</p>
			@*@Html.ActionLink("#$@&! the police", "DeleteAll", new { }, new { @class = "btn danger" })*@
		</div>
	</div>
</div>